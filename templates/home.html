{% extends 'base.html' %}
{% load static %}
{% block title %} BD University CR Reviews {% endblock title %}

{% block content %}
    <div id="home" class="page active">
        <div class="container">
            <h1 class="title">BD University CR Reviews</h1>
            
            <div class="search-section">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Search by Name...">
                    <input type="text" class="search-input" placeholder="Search by ID...">
                    <input type="text" class="search-input" placeholder="University">
                    <input type="text" class="search-input" placeholder="Department">
                    <button class="search-btn">Search</button>
                </div>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number">{{cr.count}}</div>
                    <div class="stat-label">Total CRS</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{total_university}}</div>
                    <div class="stat-label">Total Universities</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{total_department}}</div>
                    <div class="stat-label">Total Departments</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{total_review}}</div>
                    <div class="stat-label">Total Reviews</div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">Top Rated CRs</h2>
                <div class="grid">
                    <div class="card">
                        <div class="profile-photo">A</div>
                        <div class="cr-name">Ahmed Hasan</div>
                        <div class="cr-details">
                            üÜî ID: 202101001<br>
                            üèõÔ∏è Dhaka University<br>
                            üíª Computer Science<br>
                                {% comment %} Batch:231 <br> {% endcomment %}
                            üî¢ Section: A
                        </div>
                        <div class="rating">
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                        </div>
                        <button class="btn" onclick="event.stopPropagation(); openRatingModal('Ahmed Hasan')">‚≠ê Give Rating</button>
                        <button class="btn btn-secondary" onclick="window.location.href={% url 'profile' %}">üë§ View Profile</button>
                    </div>
                    
                    <div class="card">
                        <div class="profile-photo">F</div>
                        <div class="cr-name">Fatima Khatun</div>
                        <div class="cr-details">
                            üÜî ID: 202101002<br>
                            üèõÔ∏è BUET<br>
                            ‚ö° Electrical<br>
                            üî¢ Section: B
                        </div>
                        <div class="rating">
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÜ</span>
                        </div>
                        <button class="btn">‚≠ê Give Rating</button>
                        <button class="btn btn-secondary">üë§ View Profile</button>
                    </div>

                    <div class="card">
                        <div class="profile-photo">R</div>
                        <div class="cr-name">Rahim Uddin</div>
                        <div class="cr-details">
                            üÜî ID: 202101003<br>
                            üèõÔ∏è Jahangirnagar University<br>
                            üî¨ Physics<br>
                            üî¢ Section: C
                        </div>
                        <div class="rating">
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÜ</span>
                        </div>
                        <button class="btn">‚≠ê Give Rating</button>
                        <button class="btn btn-secondary">üë§ View Profile</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">Recently Added CRS</h2>
                <div class="grid">
                {% for cr in cr|slice:6 %}
                    <div class="card">
                        <div class="profile-photo">
                            {% if cr.profile_picture %}
                             <img src="{{ cr.profile_picture.url }}" alt="{{ cr.name }}">
                            {% else %}
                             <span>{{ cr.name|first|upper }}</span>
                            {% endif %}
                        </div>
                        <div class="cr-name">{{cr.name}}</div>
                        <div class="cr-details">
                            ID: {{cr.st_id}}<br>
                            {{cr.university}}<br>
                            {{cr.department}}<br>
                            Batch: {{cr.batch}}<br>
                            Section: {{cr.section}}<br>
                        </div>
                        <div class="rating">
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                            <span class="star">‚òÖ</span>
                        </div>
                        <button class="btn" onclick="event.stopPropagation(); openRatingModal('Ahmed Hasan')">‚≠ê Give Rating</button>
                        <button class="btn btn-secondary" onclick="window.location.href={% url 'profile' %}">üë§ View Profile</button>
                    </div>
                {% endfor %}

                    
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">Rating Distribution</h2>
                <div class="rating-chart">
                    <div class="chart-bar">
                        <div class="chart-label">5 Stars</div>
                        <div class="chart-progress">
                            <div class="chart-fill" style="width: 45%;"></div>
                        </div>
                        <div>45%</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">4 Stars</div>
                        <div class="chart-progress">
                            <div class="chart-fill" style="width: 30%;"></div>
                        </div>
                        <div>30%</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">3 Stars</div>
                        <div class="chart-progress">
                            <div class="chart-fill" style="width: 15%;"></div>
                        </div>
                        <div>15%</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">2 Stars</div>
                        <div class="chart-progress">
                            <div class="chart-fill" style="width: 7%;"></div>
                        </div>
                        <div>7%</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">1 Star</div>
                        <div class="chart-progress">
                            <div class="chart-fill" style="width: 3%;"></div>
                        </div>
                        <div>3%</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}